eureka:
    instance:
        prefer-ip-address: true
    client:
        service-url:
            defaultZone: http://eureka_username:eureka_password@localhost:10000/eureka/

# https://docs.spring.io/spring-security-oauth2-boot/docs/current/reference/htmlsingle/
# org.springframework.boot.autoconfigure.security.oauth2.authserver.OAuth2AuthorizationServerConfiguration.class
security:
    oauth2:
        # see org.springframework.boot.autoconfigure.security.oauth2.authserver.AuthorizationServerProperties.class
        # as authorization server
        authorization:
            check-token-access: permitAll()
            token-key-access: isAuthenticated()
            realm: realm_name
        # see org.springframework.boot.autoconfigure.security.oauth2.resource.ResourceServerProperties.class
        # as resource server
        resource:
            id: resource-uaa
            # authorization server中，resource的id参数配置不会自行生效，源码中默认值为resource-uaa，需代码覆盖原配置，见ResourceServerConfiguration。
            # authorization server因为不依赖其他服务，resource的client-id和client-secret不需配置
            jwt:
                # 对称加密
                # 在resource server中用来解析令牌，需要与authorization server同
                # 也可以配置jks文件和设置key-uri参数，以非对称加密方式获取公钥 public-key
                key-value: signingKey
        # org.springframework.boot.autoconfigure.security.oauth2.authserver.OAuth2AuthorizationServerConfiguration.BaseClientDetailsConfiguration.class
        # org.springframework.security.oauth2.provider.client.BaseClientDetails.class
        # AuthorizationCodeResourceDetails
        # 此处不支持集合属性配置
        # 校验请求方的client属性时使用，可存入数据库，在ClientDetailsServiceImpl处理
        client:
            id: auto-increment
            client-id: internal
            client-secret: internal
            # 逗号分隔，允许访问的资源
            resource-ids: resource-uaa,resource-support,resource-schedule
            # 逗号分隔
            scope: web-app,web-app
            # Access Token is valid for 60 mins
            access-token-validity-seconds: 3600
            # Refresh Token is valid for 7 days
            refresh-token-validity-seconds: 604800


